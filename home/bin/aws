#!/bin/bash

IMAGE="aws-tools:latest"

# If $DOT_AWS is not defined then set it to the default dir
if [ -z "$DOT_AWS" ]; then
    DOT_AWS=$HOME/.aws
fi


# Run once and terminate
DARGS="-t -i --rm"

# Mount the AWS config directory
DARGS+=" -v $DOT_AWS:/home/dev/.aws"

# Share files here
DARGS+=" -v /tmp/shared:/tmp/shared"

# Specify the command to run, aws cli version 2
CMD="/usr/local/bin/aws-v2"

docker run $DARGS $IMAGE $CMD $@
