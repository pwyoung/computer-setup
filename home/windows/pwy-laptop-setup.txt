
# Host
WALDL-3YGCS72
# Data dir
\\WALDL-3YGCS72\Users\youngp\Documents\data

# Local-Admin is required for most things below

# HyperV
- Enable UEFI/BIOS Virtualization settings
- Install the module
- Verify Hyper-V is enabled (control-panel->windows-features->hyper-v)
- Add user to Hyper-V Administrators group

# Docker
- Requires elevated privs
- Can start the daemon after requesting temporary local admin
- Add user to "docker-users" 
  - Otherwise, the user won't be able to start the Docker Daemon once local admin expires

 # Cygwin:
 - Installer
   - https://cygwin.com/setup-x86_64.exe
 - Apps
   - chere # For VsCode Terminal integration 
   - git
   - curl
   - wget
   - python3
   - ansible
   - emacs
   - tree
   - perl
 - Terminals
   - gnome-terminal
   - mate-terminal
   - xfce4-terminal
  - TODO:
    - ssh (client)

# VS-Code
- Configure Cygwin as the Terminal 
  Settings.json:
    - location
      - C:\Users\youngp\AppData\Roaming\Code\User
    - Docs:
      - https://code.visualstudio.com/docs/getstarted/settings
# Fix VSCODE Keybindings
C:\Users\youngp\AppData\Roaming\Code\User\keybindings.json
https://github.com/pwyoung/computer-setup/blob/master/generic/vscode/keybindings.json
# ESPECIALLY
// Emacs undo (was omitted)
{
    "key": "ctrl+shift+-",
    "command": "undo"
},


# Hadoop
- Web access to Hadoop
  - Docs 
    - URL: https://community.cloudera.com/t5/Community-Articles/User-authentication-from-Windows-Workstation-to-HDP-Realm/ta-p/245957
  - Test with Cygwin first
    - scp perf-root:/etc/krb5.conf "/cygdrive/c/Program Files/MIT/Kerberos/krb5.ini" # C:\Program Files\MIT\Kerberos\krb5.ini
    - scp perf-root:/home/srvredi/keytabs/srvredi.keytab /home/youngp/keytabs # C:\cygwin64\home\youngp\keytabs
    - ~/.bash_profile
KRB5_CONFIG=/etc/krb5.conf
KRB5CCNAME=/tmp/krb5cc_${UID}
export KRB5_CONFIG
export KRB5CCNAME
#
# Get and show Kerberos ticket in Cygwin
# kinit -k -t ~/keytabs/srvredi.keytab srvredi
# klist
#
# Set the above as Windows System Environment variables to
#   C:\Program Files\MIT\Kerberos\krb5.ini
#   C:\cygwin64\tmp\krb5cc_20563873
#
  - Install MIT-Kerberos
  - Install Firefox
  - Install Firefox Plugin for Kerberos
- DEV  
  - Ambari
    - http://cov3lhdpmst03.am.tsacorp.com:8080/
- PERF
  - Ambari
    - http://cov3lphdpmst04.am.tsacorp.com:8443/
  - Kerberos
    - principal=srvredi@IPA.AM.TSACORP.COM
    - keyTab=/home/srvredi/keytabs/srvredi.keytab
  - SSH
    - ssh youngp@cov3lphdpedge01vm # 10.5.26.240

# Cygwin Kerberos Works
# Can update a Kerberos ticket from Cygwin and make it available to Windows-MIT-Kerberos...
#



# Spark job observed
/usr/hdp/current/spark2-client/bin/spark-submit --master yarn --driver-memory 4G --executor-memory 6G --num-executors 8 --executor-cores 2 --queue ReDi-Batch --deploy-mode cluster --conf spark.memory.fraction=0.8 --conf spark.scheduler.maxRegisteredResourcesWaitingTime=60s --conf spark.driver.extraClassPath="/usr/hdp/current/spark2-client/jars/ojdbc6-11.2.0.3.jar" --keytab /home/srvredi/keytabs/srvredi.keytab --principal srvredi@IPA.AM.TSACORP.COM --conf spark.security.credentials.hiveserver2.enabled=false --jars $(echo /home/srvredi/encryptor.properties,/apps/ReDi/ReDi_ext_jars/core*.jar,/apps/ReDi/ReDi_ext_jars/encryptor-1.0.jar,/apps/ReDi/lib/config-1.3.2.jar,/apps/ReDi/lib/log4j*.jar,/apps/ReDi/lib/ojdbc6-11.2.0.3.jar,/usr/share/java/kafka-rest/*.jar,/usr/share/java/confluent-common/*.jar,/apps/ReDi/lib/avro-1.8.2.jar,/home/srvredi/ReDi_common-1.0-SNAPSHOT.jar,/usr/hdp/current/hive_warehouse_connector/*.jar | tr ' ' ',' 
) --conf "spark.driver.extraJavaOptions=-Djava.security.auth.login.config=jaas.conf" --conf "spark.driver.extraJavaOptions=-Djava.security.auth.login.config=jaas.conf -Djavax.net.ssl.trustStore=keystore_dev" --conf "spark.executor.extraJavaOptions=-Djava.security.auth.login.config=jaas.conf -Djavax.net.ssl.trustStore=keystore_dev" --files "/etc/security/keytabs/jaas.conf,/etc/security/keytabs/devtest1.keytab,/home/srvredi/keystore_dev" --class com.aciworldwide.ra.redi.chargebacks.actions.BedCBDataProcess /home/srvredi/ReDi_Chargebacks-1.0-SNAPSHOT.jar

# Hadoop - Windows Kerberos
https://community.cloudera.com/t5/Community-Articles/User-authentication-from-Windows-Workstation-to-HDP-Realm/ta-p/245957


# SKIP THIS: MCAFEE BLOCKS AND DOES NOT SUPPORT WSL 
# Install WSL (Windows System for Linux)
- ISSUE: Macafee blocks WSL  
  - Problem
    - https://github.com/microsoft/WSL/issues/2940
  - Workaround: FAILS
    - Install Ubuntu in a different path
      - https://github.com/microsoft/WSL/issues/449#issuecomment-536332377
    - Run this in Powershell
Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
New-Item C:\Users\youngp\Ubuntu -ItemType Directory
Set-Location C:\Users\youngp\Ubuntu
Invoke-WebRequest -Uri https://aka.ms/wsl-ubuntu-1804 -OutFile Ubuntu.appx -UseBasicParsing
Rename-Item .\Ubuntu.appx Ubuntu.zip
Expand-Archive .\Ubuntu.zip -Verbose
cmd
ubuntu1804.exe    
  - Details: McAfee does not support WSL 
    - The logs in EventViewer sent me to McAfee KB85494
    https://kc.mcafee.com/corporate/index?page=content&id=KB85494&_ga=2.150414782.948492726.1578681207-1301376988.1578681207
    - And apparently, McAfee simply does not support this yet.
    https://kc.mcafee.com/corporate/index?page=content&id=KB91411
- TODO (once WSL works)
  - Open WSL (ubuntu icon, or 'bash' from a Windows shell)
  - OPTIONAL: Save original config files in /etc/ via git
    - cd /etc && git init && git add . && git commit -m"initial ver of /etc"
  - Fix APT sources
    - Necessary if 'apt-get update' fails
    - NOT DONE YET...
 


# Windoze data drive should be on OneDrive...
subst D: "C:\Users\youngp\OneDrive - ACI Worldwide Corp\data"
# Cygwin
ls c:/Users/youngp/'OneDrive - ACI Worldwide Corp'/data



